!function(){var e={703:function(e,t,r){"use strict";var a=r(414);function n(){}function s(){}s.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,s,l){if(l!==a){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:n};return r.PropTypes=r,r}},697:function(e,t,r){e.exports=r(703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,r),s.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var t=window.wp.element,a=window.React,n=r.n(a),s=window.ReactDOM,l=r.n(s),c=r(697),i=r.n(c),o=window.wp.i18n,p=function(){return(0,t.createElement)("abbr",{className:"required",title:(0,o.__)("required","snpb")},"*")};class d extends n().Component{constructor(e){super(e),this.state={cardNo:"",cardMasked:"",cardExpire:"",cardPw:"",idNo:"",installment:1,userCards:[],userCard:null},this.$=jQuery,this.formatMaskedNumber=this.formatMaskedNumber.bind(this),this.deleteCard=this.deleteCard.bind(this)}componentDidMount(){}formatMaskedNumber(e){let t=[(e=e.replace(/[^0-9*]/g,"").substring(0,16)).substring(0,4),e.substring(4,8),e.substring(8,12),e.substring(12,16)];return t[2].length&&(t[2]=t[2].replace(/./g,"*")),t.join(" ").trim()}deleteCard(e){if(e>=this.state.userCards.length)return;const t=this.state.userCards[e].id;t&&this.$.ajax(u.ajaxUrl.replace("###ENDPOINT###","shpg_remove_user_card"),{method:"POST",data:{nonce:u.nonce,token_id:t}}).success((t=>{t.success&&this.setState((t=>{let{userCards:r,userCard:a}=t;return r.splice(e,1),r.length>=a&&(a=r.length-1),{userCards:r,userCard:a}}))}))}render(){const e=this.props.showInstallment,r=this.state.userCards;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{id:"shpg-manage-cards",className:"shpg-fields-wrap",style:{display:"none"}},r.length>0?(0,t.createElement)("div",null,(0,t.createElement)("hr",null),(0,t.createElement)("p",null,(0,o.sprintf)((0,o._n)("You already have %d card .","You already have %d cards.",r.length,"shoplic-pg"),r.length),(0,t.createElement)("br",null),(0,o.__)("Choose a card or register a new card.","shoplic-pg")),(0,t.createElement)("ul",{className:"shpg-cards-list"},(0,t.createElement)("li",null,(0,t.createElement)("input",{id:"shpg_user_card-none",type:"radio",name:"shpg_user_card",defaultValue:"",defaultChecked:!1,onClick:()=>{this.setState({userCard:null})}}),(0,t.createElement)("label",{htmlFor:"shpg_user_card-none"},(0,o.__)("Do not choose","shoplic-pg"))),r.map(((e,r)=>(0,t.createElement)("li",{key:e.id},(0,t.createElement)("input",{id:"shpg_user_card-"+e.id,type:"radio",name:"shpg_user_card",defaultValue:e.id,defaultChecked:this.state.userCards===r,onClick:()=>{this.setState({userCard:r})}}),(0,t.createElement)("label",{htmlFor:"shpg_user_card-"+e.id},e.card_name+" "+(e.is_check?(0,o.__)("(check)","shoplic-pg"):"")+" "+e.card_no),(0,t.createElement)("span",{className:"shpg-remove-card"},"[",(0,t.createElement)("a",{href:"#",onClick:e=>{e.preventDefault(),confirm((0,o.__)("Are you sure you want to delete this card information?","shoplic-pg"))&&this.deleteCard(r)}},(0,o.__)("Delete","shoplic-pg")),"]")))))):(0,t.createElement)("p",{className:"form-row form-row-wide"},"No cards found.")),(0,t.createElement)("div",{id:"shpg-register-card",className:"shpg-fields-wrap"},(0,t.createElement)("fieldset",null,(0,t.createElement)("p",{className:"form-row form-row-first validate-required"},(0,t.createElement)("label",{htmlFor:"shpg-card-no"},(0,o.__)("Card No.","shoplic-pg")," ",(0,t.createElement)(p,null)),(0,t.createElement)("span",{className:"woocommerce-input-wrapper"},(0,t.createElement)("input",{id:"shpg-card-masked",className:"input-text",type:"text",pattern:"\\d{4} \\d{4} \\d{4} \\d{4}",value:this.state.cardMasked,placeholder:"**** **** **** ****",onChange:e=>{const t=e.target.value.replace(/[^0-9*]/g,"").substring(0,16);this.setState((e=>{let{cardNo:r}=e;return t.length>r.length?{cardNo:r+t.substring(r.length),cardMasked:this.formatMaskedNumber(t)}:{cardNo:r.substring(0,t.length),cardMasked:this.formatMaskedNumber(t)}}))}}),(0,t.createElement)("input",{id:"shpg-card-no",name:"shpg[card_no]",className:"input-text",type:"hidden",defaultValue:this.state.cardNo}))),(0,t.createElement)("p",{className:"form-row form-row-last validate-required"},(0,t.createElement)("label",{htmlFor:"shpg-card-expire"},(0,o.__)("Card Expire","shoplic-pg")," ",(0,t.createElement)(p,null)),(0,t.createElement)("span",{className:"woocommerce-input-wrapper"},(0,t.createElement)("input",{id:"shpg-card-expire",name:"shpg[card_expire]",className:"input-text",type:"text",pattern:"\\d{2} / \\d{2}",value:this.state.cardExpire,placeholder:"MM / YY",onChange:e=>{let t=e.target.value.replace(/[^0-9]/g,"").substring(0,4);if(1===t.length&&parseInt(t)>1)t="0"+t;else if(2===t.length){let e=parseInt(t);(e<1||e>12)&&(t="")}else t.length>2&&(t=t.substring(0,2)+" / "+t.substring(2));this.setState({cardExpire:t})}}))),(0,t.createElement)("p",{className:"form-row form-row-first validate-required"},(0,t.createElement)("label",{htmlFor:"shpg-card-pw"},(0,o.__)("Card Pw. (2 digits)","shoplic-pg"),(0,t.createElement)(p,null)),(0,t.createElement)("span",{className:"woocommerce-input-wrapper"},(0,t.createElement)("input",{id:"shpg-card-pw",name:"shpg[card_pw]",type:"password",className:"input-text",value:this.state.cardPw,onChange:e=>{this.setState({cardPw:e.target.value.replace(/[^0-9]/g,"").substring(0,2)})}}))),e&&(0,t.createElement)("p",{className:"form-row form-row-last validate-required"},(0,t.createElement)("label",{htmlFor:"shpg-installment"}," ",(0,o.__)("Installment","shoplic-pg")," "),(0,t.createElement)("span",{className:"woocommerce-input-wrapper"},(0,t.createElement)("input",{id:"shpg-installment",name:"shpg[installment]",className:"input-text",type:"number",min:"1",max:"24",value:this.state.installment,onChange:e=>{this.setState({installment:parseInt(e.target.value)})}}))),(0,t.createElement)("p",{className:"form-row form-row-wide validate-required"},(0,t.createElement)("label",{htmlFor:"shpg-id-no"},(0,o.__)("Birthday 6 chars. / business number 10 chars.","shoplic-pg"),(0,t.createElement)(p,null)),(0,t.createElement)("span",{className:"woocommerce-input-wrapper"},(0,t.createElement)("input",{id:"shpg-id-no",name:"shpg[id_no]",type:"text",className:"input-text",value:this.state.idNo,onChange:e=>{this.setState({idNo:e.target.value.replace(/[^0-9]/g,"").substring(0,10)})}}))))))}}e(d,"defaultProps",{showInstallment:!1}),e(d,"propTypes",{showInstallment:i().bool});const u=shpgNicepayBilling||{ajaxUrl:"",nonce:"",isCheckoutPayPage:"no"};"yes"===u.isCheckoutPayPage?l().render((0,t.createElement)(d,null),document.getElementById("shpg-nicepay-billing")):jQuery(document.body).on("updated_checkout",(function(){l().render((0,t.createElement)(d,null),document.getElementById("shpg-nicepay-billing"))}))}()}();