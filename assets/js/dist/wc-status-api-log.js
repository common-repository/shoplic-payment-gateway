!function(){"use strict";var e={n:function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,{a:a}),a},d:function(t,a){for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,a=window.React,n=window.ReactDOM,c=e.n(n),l=window.wp.i18n;function s(e){const{stats:a,current:n,onClickSub:c}=e;return(0,t.createElement)("ul",{className:"subsubsub"},a.map(((e,l)=>{if(e.count||"all"===e.type)return(0,t.createElement)("li",{key:e.type,className:"api-"+e.type},(0,t.createElement)("a",{className:e.type===n?"current":"",href:"#",onClick:t=>{t.preventDefault(),c(e.type)}},e.label+" ",(0,t.createElement)("span",{className:"count"},"(",e.count,")")),a.length>1&&l+1<a.length?"| ":"")})))}function r(e){const{maxPage:a,page:n,onChangeInput:c}=e;return(0,t.createElement)("span",{className:"paging-input"}," ",(0,t.createElement)("span",{className:"total-pages"},a)," ",(0,l._x)("of","pagination, e.g. '8 of 1.'","snpb")," ",(0,t.createElement)("label",{htmlFor:"current-page-selector",className:"screen-reader-text"},(0,l.__)("Current page","snpb")),(0,t.createElement)("input",{id:"current-page-selector",className:"current-page",type:"number",value:n,size:"1",min:"1",max:a,"aria-describedby":"table-paging",onChange:c}),(0,t.createElement)("span",{className:"tablenav-paging-text"}))}function o(e){const{page:a,maxPage:n}=e;return(0,t.createElement)("span",{id:"table-paging",className:"paging-input"},(0,t.createElement)("span",{className:"tablenav-paging-text"}," ",(0,t.createElement)("span",{className:"total-pages"},n)," ",(0,l._x)("of","pagination, e.g. '8 of 1.'","snpb")," ",a))}function m(e){const{active:a,className:n,screenReaderText:c,children:l,onClickButton:s}=e;return a?(0,t.createElement)("a",{className:n+"  button",href:"#",onClick:s},(0,t.createElement)("span",{className:"screen-reader-text"},c),(0,t.createElement)("span",{"aria-hidden":"true"}),l):(0,t.createElement)("span",{className:"tablenav-pages-navspan button disabled","aria-hidden":"true"},l)}function i(e){const{which:a,page:n,maxPage:c,foundRows:s,onClickFirstPage:i,onClickPrevPage:p,onClickNextPage:u,onClickLastPage:g,onChangeInput:d=(()=>{})}=e,E="tablenav "+a;return(0,t.createElement)("div",{className:E},(0,t.createElement)("div",{className:"tablenav-pages"},(0,t.createElement)("span",{className:"displaying-num"},(0,l.sprintf)(
/* translators: number of items. */
(0,l._n)("%d item","%d items",s,"snpb"),s)),(0,t.createElement)("span",{className:"pagination-links"},(0,t.createElement)(m,{active:n>1,className:"first-page",screenReaderText:(0,l.__)("First page","snpb"),onClickButton:i},"«")," ",(0,t.createElement)(m,{active:n>1,className:"prev-page",screenReaderText:(0,l.__)("Previous page","snpb"),onClickButton:p},"‹")," ",(0,t.createElement)("span",{className:"screen-reader-text"},(0,l.__)("Current page","snpb")),"top"===a?(0,t.createElement)(r,{maxPage:c,page:n,onChangeInput:d}):(0,t.createElement)(o,{maxPage:c,page:n})," ",(0,t.createElement)(m,{active:n<c,className:"next-page",screenReaderText:(0,l.__)("Next page","snpb"),onClickButton:u},"›")," ",(0,t.createElement)(m,{active:n<c,className:"last-page",screenReaderText:(0,l.__)("last page","snpb"),onClickButton:g},"»"))),(0,t.createElement)("br",{className:"clear"}))}function p(){return(0,t.createElement)("tr",null,(0,t.createElement)("th",{id:"id",scope:"col",className:"manage-column column-id"},(0,l.__)("ID","snpb")),(0,t.createElement)("th",{id:"user",scope:"col",className:"manage-column column-user"},(0,l.__)("User","snpb")),(0,t.createElement)("th",{id:"datetime",scope:"col",className:"manage-column column-datetime"},(0,l.__)("Datetime","snpb")),(0,t.createElement)("th",{id:"ip",scope:"col",className:"manage-column column-ip"},(0,l.__)("IP","snpb")),(0,t.createElement)("th",{id:"api",scope:"col",className:"manage-column column-api"},(0,l.__)("API","snpb")),(0,t.createElement)("th",{id:"result_code",scope:"col",className:"manage-column column-result_code"},(0,l.__)("Result Code","snpb")),(0,t.createElement)("th",{id:"response",scope:"col",className:"manage-column column-response"},(0,l.__)("Response","snpb")))}function u(e){const a=e.userData;return a?(0,t.createElement)(t.Fragment,null,"[#"+a.id+"] ",(0,t.createElement)("a",{href:a.edit_link,target:"_blank"},a.display_name)):""}function g(e){return e.records.length?(0,t.createElement)(t.Fragment,null,e.records.map((e=>(0,t.createElement)("tr",{key:e.id},(0,t.createElement)("th",{scope:"row",className:"id column-id"},e.id),(0,t.createElement)("td",{className:"user column-user"},(0,t.createElement)(u,{userData:e.user_data})),(0,t.createElement)("td",{className:"datetime column-datetime"},e.datetime),(0,t.createElement)("td",{className:"ip column-ip"},e.ip),(0,t.createElement)("td",{className:"api column-api"},e.api),(0,t.createElement)("td",{className:"result-code column-result-code"},e.result_code),(0,t.createElement)("td",{className:"response column-response"},e.response))))):(0,t.createElement)("tr",{className:"no-items"},(0,t.createElement)("td",{className:"colspanchange",colSpan:"7"},"No items"))}function d(e){return(0,t.createElement)("table",{className:"wp-list-table widefat fixed striped table-view-list options"},(0,t.createElement)("thead",null,(0,t.createElement)(p,null)),(0,t.createElement)("tbody",{id:"the-list"},(0,t.createElement)(g,e)),(0,t.createElement)("tfoot",null,(0,t.createElement)(p,null)))}function E(){const[e,n]=(0,a.useState)(1),[c,r]=(0,a.useState)(25),[o,m]=(0,a.useState)([]),[p,u]=(0,a.useState)("all"),[g,E]=(0,a.useState)([]),[_,f]=(0,a.useState)(0),[b,N]=(0,a.useState)(0),h=function(e){e.action="snpb_get_api_log";const t=window.ajaxurl+"?"+Object.entries(e).map((e=>{let[t,a]=e;return t+"="+encodeURIComponent(a)})).join("&");fetch(t).then((e=>e.json())).then((e=>{var t;e.success&&(t=e.data,m(t.stats),E(t.log.records),f(t.log.found_rows),N(t.log.max_page))}))},v=function(e){e.preventDefault(),n(1),h({page:1,per_page:c})},C=function(t){t.preventDefault(),e>1&&(n(e-1),h({page:e-1,per_page:c}))},x=function(t){t.preventDefault(),e<b&&(n(e+1),h({page:e+1,per_page:c}))},P=function(t){t.preventDefault(),e<b&&(n(b),h({page:b,per_page:c}))};return(0,a.useEffect)((()=>{h({page:e,per_page:c})}),[]),(0,t.createElement)(t.Fragment,null,(0,t.createElement)("h2",{className:"screen-reader-text"},(0,l.__)("Filter logs","snpb")),(0,t.createElement)(s,{stats:o,current:p,onClickSub:function(e){u(e),n(1),h({api:e,page:1,per_page:c})}}),(0,t.createElement)("div",{id:"api-log-filter"},(0,t.createElement)(i,{which:"top",page:e,maxPage:b,foundRows:_,onClickFirstPage:v,onClickPrevPage:C,onClickNextPage:x,onClickLastPage:P,onChangeInput:function(e){const t=parseInt(e.target.value);console.log(t),0<t&&t<=b&&(n(t),h({page:t,per_page:c}))}}),(0,t.createElement)("h2",{className:"screen-reader-text"},(0,l.__)("Logs list","snpb")),(0,t.createElement)(d,{records:g}),(0,t.createElement)(i,{which:"bottom",page:e,maxPage:b,foundRows:_,onClickFirstPage:v,onClickPrevPage:C,onClickNextPage:x,onClickLastPage:P})),(0,t.createElement)("div",{className:"clear"}))}document.addEventListener("DOMContentLoaded",(()=>{c().render((0,t.createElement)(E,null),document.getElementById("snpb-api-log"))}))}();